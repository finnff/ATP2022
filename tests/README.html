<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="testrapport">TestRapport</h1>
<h1
id="unit-test-1-measures-speed-calculator-.srcwheelspeedcppwsp_mod.so-bestaande-uit-.srcwheelspeedcppaaaaaaaa.cpp">Unit
Test 1 Measures Speed calculator (./src/WheelSpeedCPP/wsp_mod.so)
bestaande uit (./src/WheelSpeedCPP/aaaa/aaaa.cpp)</h1>
<h2 id="unit-test-measuredspeedcalculator">Unit Test:
MeasuredSpeedCalculator</h2>
<h3 id="motivatie">Motivatie</h3>
<p>De MeasuredSpeedCalculator is een cruciaal onderdeel van het systeem,
aangezien het de snelheid van het voertuig probeert te berekenen op
basis van de input van de WheelSpeedSensor. Een nauwkeurige
snelheidsberekening is essentieel voor het ACC systeem, waardoor het op
een veilige afstand tot het voorliggende voertuig kan blijven. Als de
MeasuredSpeedCalculator onjuiste snelheden berekent, heeft dit via de
CPU invloed op het op het GasPedaal en Remsysteem. Fouten of ongewenst
gedrag in deze 2 actuatoren kan dit leiden tot onveilige situaties en
mogelijk ongevallen. Het testen van deze component is daarom
noodzakelijk om te waarborgen dat het systeem goed functioneert en om de
veiligheid te garanderen.</p>
<h3 id="testprocedure">Testprocedure</h3>
<p>Testen of de MeasuredSpeedCalculator de snelheid van het voertuig
correct berekent op basis van verschillende
inputwaarden(Hatchback,SUV,Ferrari) van de WheelSpeedSensor,
Wieldiameter en CPR van het encoderwiel.</p>
<ol type="1">
<li>Bereid testscenario’s voor met verschillende inputwaarden voor de
WheelSpeedSensor, Wieldiameter en CPR van het encoderwiel. Gebruik
realistische waarden die overeenkomen met verschillende voertuigtypen
(bijv. Hatchback, SUV, Ferrari).</li>
<li>Voer de testscenario’s uit met behulp van de Simulator, en leg zowel
de berekende snelheden, als de TrueVehicleSpeed uit de Simulator
vast.</li>
<li>Vergelijk de berekende snelheden met de TrueVehicleSpeed, rekening
houdend met de variabelen van de verschillende soorten autos uit de
testscenario’s.</li>
<li>Controleer of de berekende snelheden binnen een acceptabele
foutmarge(+- 2.0%) van de verwachte snelheden vallen. Als dit niet het
geval is, onderzoek dan de oorzaak en pas de implementatie van de
MeasuredSpeedCalculator (of WheelSpeedSensor) aan indien nodig.</li>
<li>Herhaal de testprocedure totdat de berekende snelheden consistent
nauwkeurig(i.e. binnen de foutmarge) zijn voor alle testscenario’s.</li>
</ol>
<p>Deze testprocedure is ontworpen met verschillende belangrijke
aspecten in gedachten om de nauwkeurigheid van de snelheidsberekeningen
te waarborgen en de veiligheid van het systeem te garanderen:</p>
<ul>
<li>Realistische waarden worden gebruikt voor de inputvariabelen om de
prestaties van het systeem in de praktijk te beoordelen.</li>
<li>Het vastleggen van zowel de berekende snelheden als de
TrueVehicleSpeed stelt ons in staat om objectief de nauwkeurigheid van
de berekeningen te beoordelen.</li>
<li>Door een kleine foutmarge te gebruiken, wordt rekening gehouden met
de beperkingen van floating-point precisie en kleine
nauwkeurigheidsfouten in de sensors.</li>
<li>Het herhalen van de testprocedure zorgt voor betrouwbaarheid en
verkleint de kans op onveilige situaties of ongevallen.</li>
</ul>
<p>Door deze testprocedure te volgen, kunnen we de nauwkeurigheid van de
snelheidsberekening garanderen en voorkomen dat ongewenst gedrag van het
GasPedaal en Remsysteem leidt tot onveilige situaties en mogelijk
ongevallen.</p>
<p>De Measuresed Speed snso werkt voor alle sorten wielen, ook bij
bewegeing , hoewel in eerste we de foutmarge wel haal maar dat er nog
wel relatief veel foutmarge zit in het lezenv van de sensor:</p>
<p class="heading" id="section"></p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Param Name&quot;</span><span class="fu">:</span> <span class="st">&quot;Ferrari F69&quot;</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Wheel Diameter&quot;</span><span class="fu">:</span> <span class="fl">0.71</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Encoder CPR&quot;</span><span class="fu">:</span> <span class="dv">40</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Param Name&quot;</span><span class="fu">:</span> <span class="st">&quot;Golf GTI/GTE&quot;</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Wheel Diameter&quot;</span><span class="fu">:</span> <span class="fl">0.625</span><span class="fu">,</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Encoder CPR&quot;</span><span class="fu">:</span> <span class="dv">45</span><span class="fu">,</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Param Name&quot;</span><span class="fu">:</span> <span class="st">&quot;BMW X27&quot;</span><span class="fu">,</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Wheel Diameter&quot;</span><span class="fu">:</span> <span class="fl">0.838</span><span class="fu">,</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Encoder CPR&quot;</span><span class="fu">:</span> <span class="dv">60</span><span class="fu">,</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>De Measured Speed sensor is ontworpen om compatibel te zijn met
verschillende soorten wielen en bewegingsomstandigheden. Uit de eerste
testresultaten blijkt dat we binnen de gespecificeerde foutmarge van
±2.0% vallen. Hier zijn enkele voorbeeldresultaten:</p>
<ul>
<li>True Speed: 12.03, Calculated Speed: 11.99, Delta: 0.04, Delta %:
0.30%</li>
</ul>
<p>Hoewel we binnen de foutmarge zitten, is het belangrijk op te merken
dat we een interne fout van 0.3% hebben gemodelleerd voor de sensor,
zoals aangegeven op pagina 17 van de <a
href="https://www.infineon.com/dgdl/Infineon-TLE5041PLUSC-DataSheet-v01_02-EN.pdf?fileId=5546d46265f064ff016632437f574f75">Infineon-TLE5041PLUSC
datasheet</a>.</p>
<p>Hij is getest met de volgende 3 Autos:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Param Name&quot;</span><span class="fu">:</span> <span class="st">&quot;Ferrari F69&quot;</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Wheel Diameter&quot;</span><span class="fu">:</span> <span class="fl">0.71</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Encoder CPR&quot;</span><span class="fu">:</span> <span class="dv">40</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Param Name&quot;</span><span class="fu">:</span> <span class="st">&quot;Golf GTI/GTE&quot;</span><span class="fu">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Wheel Diameter&quot;</span><span class="fu">:</span> <span class="fl">0.625</span><span class="fu">,</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Encoder CPR&quot;</span><span class="fu">:</span> <span class="dv">45</span><span class="fu">,</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Param Name&quot;</span><span class="fu">:</span> <span class="st">&quot;BMW X27&quot;</span><span class="fu">,</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Wheel Diameter&quot;</span><span class="fu">:</span> <span class="fl">0.838</span><span class="fu">,</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Encoder CPR&quot;</span><span class="fu">:</span> <span class="dv">60</span><span class="fu">,</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>De enige fouten die ik ben tegen gekomen gebeurden als ik handmatig
(via de simulator) de snelheid van het voertuig ging veranderen, en dat
de berekening van de oude snelheid al was gestart (Multi threaded
concurreny ):</p>
<figure>
<img src="img/2023-08-30-21-54-34.png" alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code voor het toevoegen van een willekeurige fout van ± 0.3% zoals gespecificeerd in de datasheet.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>encoder_pulses_per_second <span class="op">*=</span> <span class="dv">1</span> <span class="op">+</span> random.choice([<span class="op">-</span><span class="fl">0.003</span>, <span class="fl">0.003</span>])</span></code></pre></div>
<p>Wanneer deze sensorfout wordt verwijderd uit de simulatie, zijn de
foutmarges extreem laag, wat betekend dat onze code en C++-binding zeer
nauwkeurig zijn in het berekenen van de snelheid, ongeacht het
voertuigtype en de wielgrootte.</p>
<pre><code>True Speed: 12.300423,          Calculated Speed: 12.30042076110839, Delta: 2.2388916018911686e-06, Delta %: 1.820174478464008e-05, Elapsed Time: 0.00011110305786132812, 1/Elapsed Time: 9000.652360515021
True Speed: 12.410620000000002, Calculated Speed: 12.41061782836914, Delta: 2.1716308609143198e-06, Delta %: 1.749816577184959e-05, Elapsed Time: 0.0001347064971923828,  1/Elapsed Time: 7423.546902654867
True Speed: 12.519560000000002, Calculated Speed: 12.51955795288086, Delta: 2.047119142645215e-06,  Delta %: 1.63513665228268e-05,  Elapsed Time: 0.0001900196075439453,  1/Elapsed Time: 5262.614805520702</code></pre>
<p>Dit suggereert dat het merendeel van de geobserveerde fout
waarschijnlijk toe te schrijven is aan de sensor zelf en niet aan mijn
implementatie van WheelSpeedSensor. Het enige andere type fout dat
aanwezig is, betreft minimale verschillen veroorzaakt door het omzetten
van floating-point getallen naar Integers.</p>
<h2
id="integratietest-wheelspeedsensors-industriele-12v-current-modulation-interface">Integratietest:
WheelSpeedSensor’s industriele 12V Current Modulation interface</h2>
<h3 id="motivatie-1">Motivatie</h3>
<p><em>De communicatie tussen de WheelSpeedSensor en de
MeasuredSpeedCalculator is noodzakelijk voor het berekenen van de
snelheidsberekeningen.</em> <em>Als deze interface niet goed werkt,
levert dit misschien onjuiste data voor de MeasuredSpeedCalculator. Dit
zal problemen opleveren voor de hierboven genoemde Unit Test.</em>
<em>Het testen van de interface helpt om te waarborgen dat het systeem
correct functioneert en draagt bij aan de veiligheid.</em> <em>Test:
Testen of de 12V Current Modulation-interface de High/Low current
outputs van de WheelSpeedSensor correct doorstuurt naar de
MeasuredSpeedCalculator en of de MeasuredSpeedCalculator deze signalen
correct interpreteert om de snelheid van het voertuig te
berekenen.</em></p>
<p><em>### Testprocedure</em></p>
<p><em>- Zorg ervoor dat de WheelSpeedSensor en de
MeasuredSpeedCalculator correct zijn aangesloten via de 12V Current
Modulation-interface. (In ons geval is dit de C++/Python Bindings en de
communicatie hiertussen)</em> <em>- Simuleer verschillende
rotatiesnelheden van het wiel, met de WheelSpeedSensor daarop
aangesloten.</em> <em>- Monitor de High/Low current outputs die door de
WheelSpeedSensor worden gegenereerd op basis van de rotatiesnelheid van
het wiel en verifieer of deze correct worden doorgegeven via de 12V
Current Modulation-interface.</em> <em>- Controleer of de
MeasuredSpeedCalculator de ontvangen High/Low current outputs correct
interpreteert en of de berekende snelheid overeenkomt met de werkelijke
snelheid van het wiel (rekening houdend met de wieldiameter en de CPR
van het encoderwiel).</em> <em>- Voer deze test uit voor verschillende
rotatiesnelheden van het wiel om te verifiëren of de interface en de
MeasuredSpeedCalculator onder verschillende omstandigheden correct
functioneert.</em></p>
<p><em>De testprocedure controleert of de 12V Current
Modulation-interface correct werkt en of de MeasuredSpeedCalculator de
signalen nauwkeurig interpreteert. Hierdoor wordt de nauwkeurige
snelheidsberekening gegarandeerd en de veiligheid van het systeem
gewaarborgd. Het testen van verschillende rotatiesnelheden zorgt ervoor
dat het systeem onder uiteenlopende omstandigheden correct
functioneert.</em></p>
<p>dat de unit test hierboven voor zoon goed werkt is niet voor niets:
oorspronkelijk hadden we wel</p>
</body>
</html>
